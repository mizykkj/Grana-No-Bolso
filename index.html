<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central de Jogos - Jogue Agora!</title>
    <link rel="stylesheet" href="style.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9402908836616610"
         crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <button id="aboutButton" class="about-button">Sobre</button>
        <header>
            <h1>Bem-vindo à Central de Jogos!</h1>
            <p>Escolha um dos nossos jogos clássicos para se divertir.</p>
        </header>

        <section class="auth-section">

            <div id="authActionsContainer">
                <h3>Acesse ou Crie sua Conta</h3>
                <div class="auth-action-buttons">
                    <button id="showLoginViewButton" class="auth-action-btn">Fazer Login</button>
                    <button id="showRegisterViewButton" class="auth-action-btn">Criar Conta</button>
                </div>
            </div>

            <div class="auth-forms-container" id="authFormsWrapper" style="display: none;">

                <div class="auth-form" id="loginContainer" style="display: none;"> <h3>Acesse sua Conta</h3>
                    <form id="formLogin">
                        <div>
                            <label for="loginEmail">Email:</label>
                            <input type="email" id="loginEmail" name="loginEmail" required>
                        </div>
                        <div>
                            <label for="loginSenha">Senha:</label>
                            <input type="password" id="loginSenha" name="loginSenha" required>
                        </div>
                        <button type="submit">Entrar</button>
                    </form>
                    <p class="toggle-form-link">Não possui uma conta? <a href="#" id="switchToRegisterLink">Crie uma</a></p>
                </div>

                <div class="auth-form" id="registroContainer" style="display: none;"> <h3>Crie sua Conta</h3>
                    <form id="formRegistro">
                        <div>
                            <label for="registroEmail">Email:</label>
                            <input type="email" id="registroEmail" name="registroEmail" required>
                        </div>
                        <div>
                            <label for="registroSenha">Senha (mínimo 6 caracteres):</label>
                            <input type="password" id="registroSenha" name="registroSenha" required minlength="6">
                        </div>
                        <div>
                            <label for="registroConfirmaSenha">Confirmar Senha:</label>
                            <input type="password" id="registroConfirmaSenha" name="registroConfirmaSenha" required minlength="6">
                        </div>
                        <button type="submit">Registrar</button>
                    </form>
                    <p class="toggle-form-link">Já possui uma conta? <a href="#" id="switchToLoginLink">Faça login</a></p>
                </div>
            </div>

            <div id="userInfoContainer" style="display: none;">
                <p>Bem-vindo(a), <span id="userEmailDisplay"></span>!</p>
                <button id="logoutButton">Sair (Logout)</button>
            </div>

            <p id="authMessage" class="auth-message"></p>

        </section>
        <nav class="game-selection">
            <h2>Escolha seu Jogo:</h2>
            <ul>
                <li><a href="snake.html" class="game-link">Jogo da Cobrinha</a></li>
                <li><a href="pong.html" class="game-link">Pong Clássico</a></li>
                <li><a href="quebra_blocos.html" class="game-link">Quebra Blocos</a></li>
            </ul>
        </nav>

        <section class="adsense-area">
            <h2>Anúncios</h2>
            <p>Espaço reservado para anúncios do Google AdSense. <br> Configure sua conta AdSense e cole o código aqui para monetizar seu site.</p>
        </section>

        <footer>
            <p>&copy; 2025 Central de Jogos - Todos os direitos reservados.</p>
        </footer>
    </div> <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Sobre a Central de Jogos</h2>
            <p>Bem-vindo à Central de Jogos! Este espaço foi cuidadosamente desenvolvido por <strong><a href="https://www.instagram.com/mizykj/" target="_blank" rel="noopener noreferrer" class="inline-link">Mizy Dev</a></strong>.</p>
            <p>A principal motivação por trás da criação deste site é simples: trazer diversão e um toque de nostalgia através de jogos clássicos que marcaram gerações. Queremos oferecer um local onde você possa relaxar, desafiar a si mesmo e, quem sabe, relembrar bons momentos.</p>
            <p>Cada jogo foi implementado com o intuito de ser leve, acessível e fácil de jogar. Esperamos que você desfrute da experiência tanto quanto nós gostamos de criá-la.</p>
            <p>Divirta-se!</p>
            <p><em>- <a href="https://www.instagram.com/mizykj/" target="_blank" rel="noopener noreferrer" class="inline-link">Mizy Dev</a></em></p>
        </div>
    </div>

    <script>
        const modal = document.getElementById('aboutModal');
        const aboutBtn = document.getElementById('aboutButton');
        const closeBtn = modal.querySelector('.close-button');

        aboutBtn.onclick = function() {
            modal.style.display = 'flex';
            setTimeout(function() {
                modal.classList.add('modal-visible');
            }, 10);
            document.body.classList.add('modal-open');
        }

        function closeModalFunction() {
            modal.classList.remove('modal-visible');
            document.body.classList.remove('modal-open');
            setTimeout(function() {
                if (!modal.classList.contains('modal-visible')) {
                    modal.style.display = 'none';
                }
            }, 300);
        }

        closeBtn.onclick = closeModalFunction;

        window.onclick = function(event) {
            if (event.target == modal) {
                closeModalFunction();
            }
        }
    </script>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script>
      // Sua configuração do Firebase (use os valores REAIS do seu projeto)
      const firebaseConfig = {
        apiKey: "AIzaSyBYLGHFCAe_Go88NLg9huffQcaH65O8AxU", // SUBSTITUA PELO SEU VALOR REAL
        authDomain: "central-de-jogos-4bdf1.firebaseapp.com", // SUBSTITUA PELO SEU VALOR REAL
        projectId: "central-de-jogos-4bdf1", // SUBSTITUA PELO SEU VALOR REAL
        storageBucket: "central-de-jogos-4bdf1.appspot.com", // VERIFIQUE ESTE VALOR NO SEU CONSOLE FIREBASE
        messagingSenderId: "552827412845", // SUBSTITUA PELO SEU VALOR REAL
        appId: "1:552827412845:web:57af946ce0b1a53a113a64", // SUBSTITUA PELO SEU VALOR REAL
        measurementId: "G-RDL4Y8ELKQ" // SUBSTITUA PELO SEU VALOR REAL (opcional)
      };

      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();
      window.firebaseAuth = auth;
      window.firebaseDb = db;
      console.log("Firebase Compat SDKs carregados e Firebase inicializado!");
    </script>

    <script>
        // const auth = window.firebaseAuth; // Já acessível globalmente

        const authActionsContainer = document.getElementById('authActionsContainer');
        const showLoginViewButton = document.getElementById('showLoginViewButton');
        const showRegisterViewButton = document.getElementById('showRegisterViewButton');
        const authFormsWrapper = document.getElementById('authFormsWrapper');

        const loginContainer = document.getElementById('loginContainer');
        const registroContainer = document.getElementById('registroContainer');
        const formRegistro = document.getElementById('formRegistro');
        const registroEmailInput = document.getElementById('registroEmail');
        const registroSenhaInput = document.getElementById('registroSenha');
        const registroConfirmaSenhaInput = document.getElementById('registroConfirmaSenha');
        const formLogin = document.getElementById('formLogin');
        const loginEmailInput = document.getElementById('loginEmail');
        const loginSenhaInput = document.getElementById('loginSenha');

        const switchToRegisterLink = document.getElementById('switchToRegisterLink');
        const switchToLoginLink = document.getElementById('switchToLoginLink');

        const authMessage = document.getElementById('authMessage');
        const userInfoContainer = document.getElementById('userInfoContainer');
        const userEmailDisplay = document.getElementById('userEmailDisplay');
        const logoutButton = document.getElementById('logoutButton');

        function mostrarMensagemAuth(mensagem, tipo = 'error') {
            authMessage.textContent = mensagem;
            authMessage.className = 'auth-message ';
            if (tipo === 'success') {
                authMessage.classList.add('success');
            } else {
                authMessage.classList.add('error');
            }
            setTimeout(() => {
                authMessage.textContent = '';
                authMessage.className = 'auth-message';
            }, 5000);
        }

        function showAuthView(view) {
            if (authActionsContainer) authActionsContainer.style.display = 'none';
            if (authFormsWrapper) authFormsWrapper.style.display = 'none';
            if (loginContainer) loginContainer.style.display = 'none';
            if (registroContainer) registroContainer.style.display = 'none';
            if (userInfoContainer) userInfoContainer.style.display = 'none';
            authMessage.textContent = '';
            authMessage.className = 'auth-message';

            if (view === 'actions' && authActionsContainer) {
                authActionsContainer.style.display = 'block';
            } else if (view === 'login' && authFormsWrapper && loginContainer) {
                authFormsWrapper.style.display = 'block'; // Ou 'flex' se .auth-forms-container for flex
                loginContainer.style.display = 'block'; // Ou 'flex' se .auth-form for flex
            } else if (view === 'register' && authFormsWrapper && registroContainer) {
                authFormsWrapper.style.display = 'block';
                registroContainer.style.display = 'block';
            } else if (view === 'loggedIn' && userInfoContainer) {
                userInfoContainer.style.display = 'block';
            }
        }

        if (showLoginViewButton) {
            showLoginViewButton.addEventListener('click', () => {
                showAuthView('login');
            });
        }
        if (showRegisterViewButton) {
            showRegisterViewButton.addEventListener('click', () => {
                showAuthView('register');
            });
        }

        if (switchToRegisterLink) {
            switchToRegisterLink.addEventListener('click', (e) => {
                e.preventDefault();
                showAuthView('register');
            });
        }
        if (switchToLoginLink) {
            switchToLoginLink.addEventListener('click', (e) => {
                e.preventDefault();
                showAuthView('login');
            });
        }

        if (formRegistro) {
            formRegistro.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = registroEmailInput.value;
                const senha = registroSenhaInput.value;
                const confirmaSenha = registroConfirmaSenhaInput.value;

                if (senha.length < 6) {
                    mostrarMensagemAuth('A senha precisa ter no mínimo 6 caracteres.');
                    return;
                }
                if (senha !== confirmaSenha) {
                    mostrarMensagemAuth('As senhas não coincidem!');
                    return;
                }
                try {
                    await window.firebaseAuth.createUserWithEmailAndPassword(email, senha);
                    formRegistro.reset();
                } catch (error) {
                    console.error("Erro no registro:", error);
                    if (error.code === 'auth/email-already-in-use') {
                        mostrarMensagemAuth('Este email já está em uso.');
                    } else if (error.code === 'auth/weak-password') {
                        mostrarMensagemAuth('Senha muito fraca. Tente uma mais forte.');
                    } else {
                        mostrarMensagemAuth('Erro ao registrar: Verifique os dados ou tente mais tarde.');
                    }
                }
            });
        }

        if (formLogin) {
            formLogin.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = loginEmailInput.value;
                const senha = loginSenhaInput.value;
                try {
                    await window.firebaseAuth.signInWithEmailAndPassword(email, senha);
                    formLogin.reset();
                } catch (error) {
                    console.error("Erro no login:", error);
                    if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential' || error.code === 'auth/invalid-email') {
                        mostrarMensagemAuth('Email ou senha inválidos.');
                    } else {
                        mostrarMensagemAuth('Erro ao fazer login: Verifique os dados ou tente mais tarde.');
                    }
                }
            });
        }

        if (logoutButton) {
            logoutButton.addEventListener('click', async () => {
                try {
                    await window.firebaseAuth.signOut();
                } catch (error) {
                    console.error("Erro no logout:", error);
                    mostrarMensagemAuth('Erro ao sair: ' + error.message);
                }
            });
        }

        window.firebaseAuth.onAuthStateChanged(user => {
            if (user) {
                showAuthView('loggedIn');
                if (userEmailDisplay) userEmailDisplay.textContent = user.email;
            } else {
                showAuthView('actions');
            }
        });
    </script>
</body>
</html>
